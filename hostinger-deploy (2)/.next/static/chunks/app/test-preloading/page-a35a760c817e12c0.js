(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3985],{1779:(e,s,a)=>{Promise.resolve().then(a.bind(a,9049))},9049:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i});var l=a(5155),t=a(2115),r=a(8480),c=a(6358);function i(){let[e,s]=(0,t.useState)(new Map),[a,i]=(0,t.useState)(!1),[d,n]=(0,t.useState)("Toutes"),o=()=>{let e=r.ZE.slice(0,10).flatMap(e=>e.images.slice(0,1)),a=new Map;e.forEach(e=>{a.set(e,Math.random()>.5?"cached":"not-cached")}),s(a)};(0,t.useEffect)(()=>{o();let e=setInterval(o,2e3);return()=>clearInterval(e)},[]);let m=["Toutes",...Array.from(new Set(r.ZE.map(e=>e.category)))],h="Toutes"===d?r.ZE:r.ZE.filter(e=>e.category===d),g=async()=>{i(!0);let e=h.slice(0,20).flatMap(e=>e.images.slice(0,1));try{await (0,c.preloadImages)(e,"high"),o()}catch(e){}finally{i(!1)}},x=async e=>{try{await (0,c.preloadImage)(e),o()}catch(e){}};return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50 p-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Test Pr\xe9chargement d'Images"}),(0,l.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm mb-8",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Cat\xe9gorie:"}),(0,l.jsx)("select",{value:d,onChange:e=>n(e.target.value),className:"px-4 py-2 border rounded-lg w-full",children:m.map(e=>(0,l.jsx)("option",{value:e,children:e},e))})]}),(0,l.jsx)("div",{className:"flex items-end",children:(0,l.jsx)("button",{onClick:g,disabled:a,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50",children:a?"Pr\xe9chargement...":"Pr\xe9charger ".concat(d)})})]})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Produits filtr\xe9s"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-blue-500",children:h.length})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Images \xe0 pr\xe9charger"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-green-500",children:h.slice(0,20).flatMap(e=>e.images.slice(0,1)).length})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Cache Status"}),(0,l.jsxs)("p",{className:"text-3xl font-bold text-purple-500",children:[Array.from(e.values()).filter(e=>"cached"===e).length,"/",e.size]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Images Test"}),(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.ZE.slice(0,12).map(s=>(0,l.jsxs)("div",{className:"relative group",children:[(0,l.jsx)("img",{src:s.images[0].startsWith("http")||s.images[0].startsWith("/")?s.images[0]:"/".concat(s.images[0]),alt:s.name,className:"w-full h-24 object-cover rounded-lg",loading:"lazy"}),(0,l.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all rounded-lg flex items-center justify-center",children:(0,l.jsx)("button",{onClick:()=>x(s.images[0]),className:"opacity-0 group-hover:opacity-100 bg-white text-black px-2 py-1 rounded text-xs",children:"Pr\xe9charger"})}),(0,l.jsxs)("div",{className:"mt-1",children:[(0,l.jsx)("p",{className:"text-xs font-medium truncate",children:s.name}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:"cached"===e.get(s.images[0])?"✅":"⏳"})]})]},s.id))})]}),(0,l.jsxs)("div",{className:"mt-8 bg-blue-50 rounded-xl p-6",children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-2",children:"\uD83D\uDCA1 Comment \xe7a marche :"}),(0,l.jsxs)("ul",{className:"text-sm space-y-1 text-gray-700",children:[(0,l.jsx)("li",{children:"• Les images du produit actuel sont pr\xe9charg\xe9es avec priorit\xe9 haute"}),(0,l.jsx)("li",{children:"• Les produits similaires sont pr\xe9charg\xe9s en arri\xe8re-plan (priorit\xe9 basse)"}),(0,l.jsx)("li",{children:"• Le cache \xe9vite les rechargements multiples"}),(0,l.jsx)("li",{children:"• requestIdleCallback est utilis\xe9 pour ne pas impacter les performances"})]})]})]})}}},e=>{e.O(0,[4385,8096,7358],()=>e(e.s=1779)),_N_E=e.O()}]);