(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2162,8525],{3642:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(5155),i=r(8382),a=r(2115),n=r(63),l=r(2619),o=r.n(l),c=r(7816),d=r(1078),u=r(3664),m=r(9730);function h(){let[e,t]=(0,a.useState)(""),[r,l]=(0,a.useState)(!1),[h,x]=(0,a.useState)(""),[f,p]=(0,a.useState)(!1);(0,n.useRouter)();let{resetPassword:b}=(0,m.A)(),v=async t=>{t.preventDefault(),l(!0),x("");let{error:r}=await b(e);r?x(r.message):p(!0),l(!1)};return f?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-cream to-iceBlue/20 px-4 pt-20",children:(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,s.jsx)(i.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)(c.A,{className:"w-8 h-8 text-green-600"})}),(0,s.jsx)("h1",{className:"text-3xl font-display font-bold text-textDark mb-4",children:"Email envoy\xe9 !"}),(0,s.jsxs)("p",{className:"text-gray-600 mb-8",children:["Un email de r\xe9initialisation de mot de passe a \xe9t\xe9 envoy\xe9 \xe0 ",e,". Veuillez v\xe9rifier votre bo\xeete de r\xe9ception et suivre les instructions."]}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)(o(),{href:"/login",className:"block w-full bg-rose-custom text-white py-3 rounded-lg font-semibold hover:bg-rose-custom/90 transition-colors",children:"Retour \xe0 la connexion"})})]})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-cream to-iceBlue/20 px-4 pt-20",children:(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-display font-bold text-textDark mb-2",children:"Mot de passe oubli\xe9"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Entrez votre email pour recevoir un lien de r\xe9initialisation"})]}),h&&(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3",children:[(0,s.jsx)(d.A,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),(0,s.jsx)("p",{className:"text-red-700 text-sm",children:h})]}),(0,s.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-textDark mb-2",children:"Email"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,s.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose focus:border-transparent outline-none transition-all",placeholder:"votre@email.com"})]})]}),(0,s.jsx)("button",{type:"submit",disabled:r||!e,className:"w-full bg-rose-custom text-white py-3 rounded-lg font-semibold hover:bg-rose-custom/90 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Envoi en cours..."]}):(0,s.jsxs)(s.Fragment,{children:["Envoyer le lien",(0,s.jsx)(u.A,{className:"w-5 h-5"})]})})]})]})})}},8525:(e,t,r)=>{"use strict";r.d(t,{createClient:()=>i});var s=r(5417);function i(){let e="https://xvczqjkmbfpjkdghvomc.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh2Y3pxamttYmZwamtkZ2h2b21jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk0MjA5MjUsImV4cCI6MjA4NDk5NjkyNX0.Qi9gHILEaBylF8ObdcpXqg9n8wrlX46MFSzlIcZbCG0";return e&&t?(0,s.createBrowserClient)(e,t):null}},8550:(e,t,r)=>{Promise.resolve().then(r.bind(r,3642))},9730:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>o});var s=r(5155),i=r(2115),a=r(8525),n=r(63);let l=(0,i.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,i.useState)(null),[c,d]=(0,i.useState)(null),[u,m]=(0,i.useState)(!0),h=(0,n.useRouter)(),x=(0,a.createClient)();(0,i.useEffect)(()=>{if(!x)return void m(!1);let{data:{subscription:e}}=x.auth.onAuthStateChange((e,t)=>{var r;d(t),o(null!=(r=null==t?void 0:t.user)?r:null),m(!1)});return(async()=>{var e;let{data:{session:t}}=await x.auth.getSession();d(t),o(null!=(e=null==t?void 0:t.user)?e:null),m(!1)})(),()=>{e.unsubscribe()}},[x,h]);let f=async(e,t,r)=>{let s=(0,a.createClient)();if(!s)return{error:{message:"Service d'authentification non disponible"}};let{error:i}=await s.auth.signUp({email:e,password:t,options:{data:r}});return{error:i}},p=async(e,t)=>{let r=(0,a.createClient)();if(!r)return{error:{message:"Service d'authentification non disponible"}};let{error:s}=await r.auth.signInWithPassword({email:e,password:t});return h.refresh(),{error:s}},b=async()=>{let e=(0,a.createClient)();e&&(await e.auth.signOut(),h.refresh())},v=async e=>{let t=(0,a.createClient)();if(!t)return{error:{message:"Service d'authentification non disponible"}};let{error:r}=await t.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});return{error:r}},g=async e=>{let t=(0,a.createClient)();if(!t)return{exists:!1,error:{message:"Service d'authentification non disponible"}};try{var r,s;let{error:i}=await t.auth.signInWithPassword({email:e,password:"dummy-password-for-check-only"});if(null==i||null==(r=i.message)?void 0:r.includes("Invalid login credentials"))return{exists:!1,error:null};if(null==i||null==(s=i.message)?void 0:s.includes("Invalid password"))return{exists:!0,error:null};return{exists:!1,error:i}}catch(e){return{exists:!1,error:e}}},y=async(e,t)=>{let r=(0,a.createClient)();if(!r)return{error:{message:"Service d'authentification non disponible"}};let{error:s}=await r.auth.setSession({access_token:e,refresh_token:t});return s||h.refresh(),{error:s}};return(0,s.jsx)(l.Provider,{value:{user:r,session:c,loading:u,signUp:f,signIn:p,signOut:b,resetPassword:v,checkEmailExists:g,confirmEmail:y},children:t})}function c(){let e=(0,i.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[8096,7358],()=>e(e.s=8550)),_N_E=e.O()}]);