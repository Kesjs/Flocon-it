"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[731],{145:(e,t,a)=>{a.d(t,{h:()=>u});var s=a(5155),r=a(2619),i=a.n(r),o=a(512),c=a(9347),l=a(9962),n=a(2115),d=a(4588);function u(e){let{product:t,className:a=""}=e,{addToCart:r}=(0,l._)(),[u,m]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),g=t.oldPrice?Math.round((t.oldPrice-t.price)/t.oldPrice*100):0;return(0,s.jsxs)("div",{className:"group relative bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden will-change-transform ".concat(a),onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),style:{transform:"translateZ(0)"},children:[(0,s.jsxs)("div",{className:"absolute top-3 left-3 z-10",children:[t.oldPrice&&t.oldPrice>t.price&&(0,s.jsxs)("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:["Promo -",g,"%"]}),t.badge&&!t.oldPrice&&(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("Best-seller"===t.badge?"bg-green-100 text-green-800":"Nouveaut\xe9"===t.badge?"bg-blue-100 text-blue-800":"Cadeau parfait"===t.badge?"bg-pink-100 text-pink-800":"\xc9dition limit\xe9e"===t.badge?"bg-purple-100 text-purple-800":"bg-rose-custom-100 text-rose-custom-800"),children:t.badge})]}),(0,s.jsxs)("div",{className:"relative w-full aspect-square overflow-hidden bg-gray-50",children:[(0,s.jsx)(i(),{href:"/boutique/".concat(t.slug),className:"block w-full h-full",children:(0,s.jsx)(d.A,{src:t.images[0].startsWith("http")||t.images[0].startsWith("/")?t.images[0]:"/".concat(t.images[0]),alt:t.name,fill:!0,className:"object-cover transition-transform duration-700 ".concat(u?"scale-110":"scale-100"),sizes:"(max-width: 640px) 50vw, (max-width: 1024px) 33vw, 25vw",quality:80,loading:"lazy",fallbackSrc:"/placeholder-product.webp",onError:()=>p(!0)})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center transition-opacity duration-300 ".concat(u?"opacity-100":"opacity-0 pointer-events-none"),children:(0,s.jsxs)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),r({id:t.id,name:t.name,price:t.price,image:t.images[0]})},className:"bg-white text-gray-900 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition-colors flex items-center space-x-2",children:[(0,s.jsx)(o.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Ajouter au panier"})]})})]}),(0,s.jsxs)("div",{className:"p-4 pt-6",children:[(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)(i(),{href:"/boutique/".concat(t.slug),className:"block",children:(0,s.jsx)("h3",{className:"font-semibold text-textDark hover:text-rose-custom transition-colors line-clamp-2 leading-tight",children:t.name})}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:t.subCategory})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 line-clamp-1",children:t.description.length>80?t.description.substring(0,80)+"...":t.description}),(0,s.jsxs)(i(),{href:"/boutique/".concat(t.slug),className:"text-xs text-rose-custom hover:text-rose-custom/80 font-medium mt-1 transition-colors flex items-center gap-1",children:["Voir plus",(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,s.jsx)("div",{className:"flex items-center",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>(0,s.jsx)(c.A,{className:"w-4 h-4 ".concat(a<Math.floor(t.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300")},a))}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[t.rating," (",t.reviewsCount,")"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("span",{className:"text-lg font-bold text-textDark",children:[t.price.toFixed(2)," €"]}),t.oldPrice&&(0,s.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:[t.oldPrice.toFixed(2)," €"]})]})]})]})}},4588:(e,t,a)=>{a.d(t,{A:()=>c});var s=a(5155),r=a(2115),i=a(5239),o=a(6358);function c(e){let{src:t,alt:a,width:c,height:l,fill:n=!1,className:d="",priority:u=!1,quality:m=80,sizes:h,style:p,onError:g,placeholder:x="empty",blurDataURL:f,loading:v="lazy",unoptimized:y=!1,fallbackSrc:b="/placeholder-product.webp"}=e,[j,w]=(0,r.useState)(t),[N,k]=(0,r.useState)(!0),[S,C]=(0,r.useState)(!1),[M,E]=(0,r.useState)(!1);(0,r.useEffect)(()=>{E(!0)},[]),(0,r.useEffect)(()=>{w(t),C(!1),k(!0)},[t]),(0,r.useEffect)(()=>{M&&t&&!S&&(0,o.preloadImage)(t).catch(e=>{})},[M,t,S]);let P=n?"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw":void 0,q={src:j,alt:a,className:"".concat(d||""," transition-opacity duration-300 ").concat(N?"opacity-0":"opacity-100").trim(),priority:u,quality:m,sizes:h||P,style:{...p},onError:e=>{g&&g(e),S||(b&&j!==b&&w(b),C(!0))},onLoad:()=>k(!1),placeholder:x,blurDataURL:f,loading:v,unoptimized:y};return n?(0,s.jsxs)("div",{className:"relative w-full h-full ".concat(d||""),style:p,children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-100 transition-opacity duration-300 ".concat(!M||N||S?"opacity-100":"opacity-0 pointer-events-none")}),(0,r.createElement)(i.default,{...q,fill:!0,sizes:h||P,key:"".concat(M,"-").concat(j)})]}):(0,s.jsxs)("div",{className:"relative",style:{width:c,height:l},children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-100 transition-opacity duration-300 ".concat(!M||N||S?"opacity-100":"opacity-0 pointer-events-none")}),(0,r.createElement)(i.default,{...q,width:c,height:l,key:"".concat(M,"-").concat(j)})]})}},5739:(e,t,a)=>{function s(e,t){let a={product:t,score:0,reasons:[]};if(e.id===t.id)return a;if(e.subCategory===t.subCategory&&(a.score+=40,a.reasons.push("M\xeame sous-cat\xe9gorie")),e.tags&&t.tags){let s=e.tags.filter(e=>{var a;return null==(a=t.tags)?void 0:a.includes(e)});s.length>0&&(a.score+=Math.min(8*s.length,25),a.reasons.push("Tags communs: ".concat(s.join(", "))))}return e.ambiance===t.ambiance&&(a.score+=20,a.reasons.push("M\xeame ambiance")),Math.abs(e.price-t.price)<=.3*e.price&&(a.score+=10,a.reasons.push("Gamme de prix similaire")),e.category===t.category&&(a.score+=5,a.reasons.push("M\xeame cat\xe9gorie")),e.badge&&e.badge===t.badge&&(a.score+=5,a.reasons.push("M\xeame badge")),a}function r(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2,o=t.filter(t=>t.id!==e.id).map(t=>s(e,t)).filter(e=>e.score>0);return 0===o.length?i(t.filter(t=>t.category===e.category&&t.id!==e.id)).slice(0,a):(o.forEach(e=>{let t=Math.random()*r*100;e.score+=t}),o.sort((e,t)=>t.score-e.score),i(o.slice(0,Math.min(2*a,o.length))).slice(0,a).map(e=>e.product))}function i(e){let t=[...e];for(let e=t.length-1;e>0;e--){let a=Math.floor(Math.random()*(e+1));[t[e],t[a]]=[t[a],t[e]]}return t}a.d(t,{g3:()=>r,mp:()=>s})},9962:(e,t,a)=>{a.d(t,{_:()=>l,e:()=>c});var s=a(5155),r=a(2115);let i=(0,r.createContext)(void 0),o="flocon-cart";function c(e){let{children:t}=e,[a,c]=(0,r.useState)([]),[l,n]=(0,r.useState)(!1);(0,r.useEffect)(()=>{try{let e=localStorage.getItem(o);if(e){let t=JSON.parse(e);c(Array.isArray(t)?t:[])}}catch(e){localStorage.removeItem(o)}finally{n(!0)}},[]),(0,r.useEffect)(()=>{if(l)try{localStorage.setItem(o,JSON.stringify(a))}catch(e){}},[a,l]);let d=e=>{c(t=>t.filter(t=>t.id!==e))};return(0,s.jsx)(i.Provider,{value:{cartItems:a,addToCart:e=>{c(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])},removeFromCart:d,updateQuantity:(e,t)=>{if(t<=0)return void d(e);c(a=>a.map(a=>a.id===e?{...a,quantity:t}:a))},clearCart:()=>{c([]);try{localStorage.removeItem(o)}catch(e){}},clearCartAfterPayment:()=>{c([]);try{localStorage.removeItem(o),localStorage.setItem("last-payment",new Date().toISOString())}catch(e){}}},children:t})}function l(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}}]);