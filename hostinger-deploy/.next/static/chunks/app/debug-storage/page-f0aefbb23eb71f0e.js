(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2802,8525],{3838:(e,t,r)=>{Promise.resolve().then(r.bind(r,4018))},4018:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(5155),n=r(2115),a=r(63),l=r(9730);function i(){let{user:e}=(0,l.A)(),t=(0,a.useRouter)(),[r,i]=(0,n.useState)([]),[o,c]=(0,n.useState)("");(0,n.useEffect)(()=>{u()},[]);let u=()=>{let e=[],t=0;for(let r=0;r<localStorage.length;r++){let s=localStorage.key(r);if(s){let r=localStorage.getItem(s)||"",n=new Blob([s+r]).size;t+=n,e.push({key:s,value:r.length>100?r.substring(0,100)+"...":r,size:n})}}i(e);let r="\uD83D\uDCCA Analyse localStorage:\n";r+="• Total entr\xe9es: ".concat(e.length,"\n"),r+="• Taille totale: ".concat((t/1024).toFixed(2)," KB\n\n");let s={flocon:e.filter(e=>e.key.includes("flocon")),cart:e.filter(e=>e.key.includes("cart")),order:e.filter(e=>e.key.includes("order")),other:e.filter(e=>!e.key.includes("flocon")&&!e.key.includes("cart")&&!e.key.includes("order"))};r+="\uD83D\uDCC2 Cat\xe9gories:\n",r+="• Flocon: ".concat(s.flocon.length," entr\xe9es\n"),r+="• Cart: ".concat(s.cart.length," entr\xe9es\n"),r+="• Order: ".concat(s.order.length," entr\xe9es\n"),r+="• Other: ".concat(s.other.length," entr\xe9es\n\n");let n=e.filter(e=>e.key.includes("order")||e.key.includes("flocon_orders"));n.length>0&&(r+="\uD83D\uDED2 Donn\xe9es de commandes trouv\xe9es:\n",n.forEach(e=>{try{let t=JSON.parse(localStorage.getItem(e.key)||"[]");r+="• ".concat(e.key,": ").concat(Array.isArray(t)?t.length:"N/A"," commandes\n")}catch(t){r+="• ".concat(e.key,": Non-parsable\n")}})),c(r)};return(0,s.jsx)("div",{className:"pt-28 min-h-screen bg-cream px-4 py-12",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-textDark mb-2",children:"\uD83D\uDD0D Debug localStorage"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Analyse compl\xe8te des donn\xe9es stock\xe9es dans votre navigateur"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDCCA Analyse"}),(0,s.jsx)("pre",{className:"text-sm bg-gray-50 p-4 rounded-lg overflow-auto",children:o})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDCCB Donn\xe9es d\xe9taill\xe9es"}),(0,s.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:r.map((e,t)=>(0,s.jsx)("div",{className:"border-b pb-2",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-mono text-sm font-medium text-blue-600",children:e.key}),(0,s.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:e.value})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[(e.size/1024).toFixed(2)," KB"]}),(0,s.jsx)("button",{onClick:()=>{var t;return t=e.key,void(confirm('Supprimer "'.concat(t,'" ?'))&&(localStorage.removeItem(t),u()))},className:"text-red-500 hover:text-red-700 text-xs",children:"\uD83D\uDDD1️"})]})]})},t))})]})]}),(0,s.jsxs)("div",{className:"mt-8 flex gap-4",children:[(0,s.jsx)("button",{onClick:u,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uD83D\uDD04 Actualiser"}),(0,s.jsx)("button",{onClick:()=>t.push("/clean-data"),className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"\uD83E\uDDF9 Nettoyer tout"}),(0,s.jsx)("button",{onClick:()=>t.push("/dashboard"),className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"\uD83C\uDFE0 Dashboard"})]})]})})}},8525:(e,t,r)=>{"use strict";r.d(t,{createClient:()=>n});var s=r(5417);function n(){let e="https://xvczqjkmbfpjkdghvomc.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh2Y3pxamttYmZwamtkZ2h2b21jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk0MjA5MjUsImV4cCI6MjA4NDk5NjkyNX0.Qi9gHILEaBylF8ObdcpXqg9n8wrlX46MFSzlIcZbCG0";return e&&t?(0,s.createBrowserClient)(e,t):null}},9730:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>o});var s=r(5155),n=r(2115),a=r(8525),l=r(63);let i=(0,n.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,n.useState)(null),[c,u]=(0,n.useState)(null),[d,h]=(0,n.useState)(!0),m=(0,l.useRouter)(),x=(0,a.createClient)();(0,n.useEffect)(()=>{if(!x)return void h(!1);let{data:{subscription:e}}=x.auth.onAuthStateChange((e,t)=>{var r;u(t),o(null!=(r=null==t?void 0:t.user)?r:null),h(!1)});return(async()=>{var e;let{data:{session:t}}=await x.auth.getSession();u(t),o(null!=(e=null==t?void 0:t.user)?e:null),h(!1)})(),()=>{e.unsubscribe()}},[x,m]);let g=async(e,t,r)=>{let s=(0,a.createClient)();if(!s)return{error:{message:"Service d'authentification non disponible"}};let{error:n}=await s.auth.signUp({email:e,password:t,options:{data:r}});return{error:n}},f=async(e,t)=>{let r=(0,a.createClient)();if(!r)return{error:{message:"Service d'authentification non disponible"}};let{error:s}=await r.auth.signInWithPassword({email:e,password:t});return m.refresh(),{error:s}},v=async()=>{let e=(0,a.createClient)();e&&(await e.auth.signOut(),m.refresh())},b=async e=>{let t=(0,a.createClient)();if(!t)return{error:{message:"Service d'authentification non disponible"}};let{error:r}=await t.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});return{error:r}},p=async e=>{let t=(0,a.createClient)();if(!t)return{exists:!1,error:{message:"Service d'authentification non disponible"}};try{var r,s;let{error:n}=await t.auth.signInWithPassword({email:e,password:"dummy-password-for-check-only"});if(null==n||null==(r=n.message)?void 0:r.includes("Invalid login credentials"))return{exists:!1,error:null};if(null==n||null==(s=n.message)?void 0:s.includes("Invalid password"))return{exists:!0,error:null};return{exists:!1,error:n}}catch(e){return{exists:!1,error:e}}},y=async(e,t)=>{let r=(0,a.createClient)();if(!r)return{error:{message:"Service d'authentification non disponible"}};let{error:s}=await r.auth.setSession({access_token:e,refresh_token:t});return s||m.refresh(),{error:s}};return(0,s.jsx)(i.Provider,{value:{user:r,session:c,loading:d,signUp:g,signIn:f,signOut:v,resetPassword:b,checkEmailExists:p,confirmEmail:y},children:t})}function c(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[8096,7358],()=>e(e.s=3838)),_N_E=e.O()}]);