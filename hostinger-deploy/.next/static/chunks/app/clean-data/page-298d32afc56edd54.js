(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8471,8525],{4365:(e,t,r)=>{Promise.resolve().then(r.bind(r,6879))},6879:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(5155),s=r(2115),a=r(63),l=r(9730);function o(){let{user:e}=(0,l.A)(),t=(0,a.useRouter)(),[r,o]=(0,s.useState)(!1),[i,c]=(0,s.useState)("");return(0,n.jsx)("div",{className:"pt-28 min-h-screen bg-cream flex items-center justify-center px-4",children:(0,n.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-8 text-center",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-textDark mb-4",children:"Nettoyer les donn\xe9es"}),(0,n.jsx)("p",{className:"text-gray-600 mb-6",children:"Cette page va supprimer toutes les donn\xe9es de test et les commandes mock\xe9es de votre localStorage."}),i&&(0,n.jsx)("div",{className:"p-4 rounded-lg mb-6 ".concat(i.includes("✅")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:i}),(0,n.jsx)("button",{onClick:()=>{o(!0),c("Nettoyage en cours...");try{let t=[];for(let e=0;e<localStorage.length;e++){let r=localStorage.key(e);r&&t.push(r)}let r=[];for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e);t&&(t.includes("flocon")||t.includes("cart")||t.includes("checkout")||t.includes("order")||t.includes("demo")||t.includes("test"))&&r.push(t)}r.forEach(e=>{localStorage.removeItem(e)});let n=["flocon_orders","flocon_user_stats","flocon_cart","flocon_checkout","cart","orders","user_stats"];n.forEach(t=>{localStorage.removeItem(t),(null==e?void 0:e.id)&&(localStorage.removeItem("".concat(t,"_").concat(e.id)),localStorage.removeItem("".concat(t,"_").concat(e.id,"_stats")))});for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e);t&&t.includes("flocon_user_stats_")&&localStorage.removeItem(t)}let s=[];for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e);t&&s.push(t)}c("✅ Nettoyage termin\xe9 ! ".concat(r.length+n.length," entr\xe9es supprim\xe9es.")),setTimeout(()=>{window.location.reload()},2e3)}catch(e){c("❌ Erreur lors du nettoyage: ".concat(e))}finally{o(!1)}},disabled:r,className:"w-full bg-red-600 text-white py-3 rounded-lg font-semibold hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Nettoyage...":"Supprimer toutes les donn\xe9es"}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)("button",{onClick:()=>t.push("/dashboard"),className:"text-gray-600 hover:text-gray-800 underline",children:"Retour au dashboard"})})]})})}},8525:(e,t,r)=>{"use strict";r.d(t,{createClient:()=>s});var n=r(5417);function s(){let e="https://xvczqjkmbfpjkdghvomc.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh2Y3pxamttYmZwamtkZ2h2b21jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk0MjA5MjUsImV4cCI6MjA4NDk5NjkyNX0.Qi9gHILEaBylF8ObdcpXqg9n8wrlX46MFSzlIcZbCG0";return e&&t?(0,n.createBrowserClient)(e,t):null}},9730:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>i});var n=r(5155),s=r(2115),a=r(8525),l=r(63);let o=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[d,h]=(0,s.useState)(!0),m=(0,l.useRouter)(),g=(0,a.createClient)();(0,s.useEffect)(()=>{if(!g)return void h(!1);let{data:{subscription:e}}=g.auth.onAuthStateChange((e,t)=>{var r;u(t),i(null!=(r=null==t?void 0:t.user)?r:null),h(!1)});return(async()=>{var e;let{data:{session:t}}=await g.auth.getSession();u(t),i(null!=(e=null==t?void 0:t.user)?e:null),h(!1)})(),()=>{e.unsubscribe()}},[g,m]);let f=async(e,t,r)=>{let n=(0,a.createClient)();if(!n)return{error:{message:"Service d'authentification non disponible"}};let{error:s}=await n.auth.signUp({email:e,password:t,options:{data:r}});return{error:s}},v=async(e,t)=>{let r=(0,a.createClient)();if(!r)return{error:{message:"Service d'authentification non disponible"}};let{error:n}=await r.auth.signInWithPassword({email:e,password:t});return m.refresh(),{error:n}},p=async()=>{let e=(0,a.createClient)();e&&(await e.auth.signOut(),m.refresh())},b=async e=>{let t=(0,a.createClient)();if(!t)return{error:{message:"Service d'authentification non disponible"}};let{error:r}=await t.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});return{error:r}},w=async e=>{let t=(0,a.createClient)();if(!t)return{exists:!1,error:{message:"Service d'authentification non disponible"}};try{var r,n;let{error:s}=await t.auth.signInWithPassword({email:e,password:"dummy-password-for-check-only"});if(null==s||null==(r=s.message)?void 0:r.includes("Invalid login credentials"))return{exists:!1,error:null};if(null==s||null==(n=s.message)?void 0:n.includes("Invalid password"))return{exists:!0,error:null};return{exists:!1,error:s}}catch(e){return{exists:!1,error:e}}},x=async(e,t)=>{let r=(0,a.createClient)();if(!r)return{error:{message:"Service d'authentification non disponible"}};let{error:n}=await r.auth.setSession({access_token:e,refresh_token:t});return n||m.refresh(),{error:n}};return(0,n.jsx)(o.Provider,{value:{user:r,session:c,loading:d,signUp:f,signIn:v,signOut:p,resetPassword:b,checkEmailExists:w,confirmEmail:x},children:t})}function c(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[8096,7358],()=>e(e.s=4365)),_N_E=e.O()}]);